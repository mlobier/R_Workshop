---
title       : Introduction to R Workshop 
subtitle    : Session 1
author      : Muriel Lobier
job         : 
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets     : [mathjax, quiz, bootstrap]           # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
---

## Introduction to R for data analysis and visualization

### Workshop agenda

* Scientific data analysis should: 
  * be reproducible 
    * by me
    * by others (if given my code and data)
  * follow rigorous statistical standards
  * use open tools 
  
  
* R is a great way to achieve this


--- .class #id 

## Introduction to R for data analysis and visualization

### Overarching objective: 
* Be able to use R and R-studio to:
  * establish a reproducible and documented data-analysis pipeline

###  Specific Learning goals:
* How to structure a data analysis project
* How to import, clean up and transform data
* How to visualize data and make publication ready figures
* How to run simple inferential statistical analyses
* How to run less-simple inferential statistical analyses

--- .class #id 

## Introduction to R for data analysis and visualization

### Insctructor's philosophy and priors:

* Learning the most efficient tools first is more ... efficient
* Learning to solve problems is more efficient than:
  * reading code written by someone else to solve a fake problem
  * listening to the instructor drone on and on and make bad jokes
* The tidyverse and ggplot are awesome

### What this workshop is not:
* A complete overview of all that R can do
* An R programming course
 

---

## Session 1 - Learning goals

* Using R-Studio
* How to structure a data analysis project
* Importing Data
* What is Tidy data
* Transforming and restructuring data

---

## R-studio

So let's start by opening R-Studio !!

```{r echo=FALSE, eval=FALSE}
Here we all open R-Studio

We go through the interface together:
  Scripts / Console / ENvironment / History / Files and packages

People should have gone thru a quick online tutorial before so should go fast.
```

---

## R-studio and R-Notebooks

Now let's create a notebook.
Notebooks are great because you can:
* mix text and code in the same document
* execute blocks of code sequentially 

```{r echo=FALSE, eval=FALSE}
We create an R notebook

```
<iframe src='./assets/img/session_1_RNotebook.png'>
</iframe> 

--- &twocol

## Problem to solve Nb 1

We have acquired data on a Posner-like stimulus detection and discrimination task. 
*** =left

<iframe src='./assets/img/session_1_paradigm.png'>
</iframe> 

*** =right
Independent variables: 
* Attention :
  * Left / Right
* Stimulus contrast :
  * Low / High
* Stimulus validity:
  * Valid / Invalid
  
Dependent variables:
* RT
* Detection rate
* Discrimination rate

---

## The problem we want to solve

Go from this:

<iframe src='./assets/img/session_1_folders.png'>
</iframe> 



---

## The problem we want to solve

To this:

<iframe src='./assets/img/session_1_final_objective.svg'>
</iframe> 

---
## Step 1: create a project folder structure

Project directories should be organized consistently and methodically. My preferred structure would be:

project_name/ (root directory)
* name_of_analysis.Rmd (Rnotebook with main analysis code)
* R/ (fproject-specific R function files)
* data/ (original data - READ ONLY)
* figs/ (figures generated by my code)
* output/ (processed or simulated data, other non-final output )

**Create your own project directory structure now**

---

## Step 2: create R Notebook for our analysis

Notebooks are great because you can:
* combine text and code in the same document
* execute blocks of code sequentially to build your analysis step by step
* save the ouput as:
  * a notebook file .nb.html
  * a browser-friendly html file (or pdf, word....)

```{r echo=FALSE, eval=FALSE}
Everybody goes to Create File, new R note Book

```
<iframe src='./assets/img/session_1_RNotebook.png'>
</iframe> 

---

## Step 2: create R Notebook for our analysis

* **Save your R notebook in your project root directory**

* Remember to modify the title of the notebook header to a descriptive title

* You can 
  * execute a chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 
  * add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*
  * preview the ouput files by pressing preview
  
* R notebooks use Markdown syntax. A helful cheatsheet is here.

---
## Step 3: Download the data

* Dowload the data from google drive to a /data/behav/ directory.

* Remember to have a different folder for each subject.

---

## Step 4: Let's import some data


* First we load the tidyverse library

* What is tidyverse? It's **AWESOME** as you can see [here](http://tidyverse.org/)

So we first load the tidyverse library which will load most of the 'verse...
```{r}
library(tidyverse)
```

---

## Step 4: Let's import some data

In the `data\Exercises\session_1` directory, there are several versions of the same data file.

* These files can all be read by one of the following readr functions with the proper parameters:

  * `read_csv()`  -  `read_csv2()`  - `read_tsv()`  - `read_delim()`

* For example, data_1.csv is a standard *comma-separated* flat data file and can be read by read_csv()
  * We **assign** the data to a variable  *data_1* using the `<-` operator
  * *data* should now have appeared in the top-right **Environment** pane


```{r, eval=FALSE}
data_1<-read_csv("data/Exercises/session_1/data_1.csv")

data_1
```

---

## Step 4: Let's import some data

Did it work ?

Does the data structure look reasonable??


```{r, eval=TRUE, warning=FALSE, message=FALSE}
data_1<-read_csv("data/Exercises/session_1/data_1.csv")

data_1
```

---

## Step 4: Let's import some data

* Now try to find the appropriate function and parameters to import the other files.
  * `read_csv()`  -  `read_csv2()`  - `read_tsv()`  - `read_delim()`

* Use the help function in the *console* to understand the difference between these functions. 

```{r, eval=FALSE}
?read_csv()
```

---



